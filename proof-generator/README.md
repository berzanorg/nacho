# nacho-proof-generator

The zero knowledge proof generator of [Nacho](https://github.com/berzanorg/nacho) using [o1js](https://www.npmjs.com/package/o1js).

[`nacho-proof-generator`](https://www.npmjs.com/package/nacho-proof-generator) package is intended to be used for [Nacho](https://github.com/berzanorg/nacho) only as it is a naive implementation.

## üì¶ Installation

If you are using [`npm`](https://docs.npmjs.com/cli/):

```shell
npm install nacho-proof-generator
```

If you are using [`yarn`](https://classic.yarnpkg.com/lang/en/docs/cli/):

```shell
yarn add nacho-proof-generator
```

If you are using [`pnpm`](https://pnpm.io/pnpm-cli):

```shell
pnpm add nacho-proof-generator
```

## üîç Details

Nacho's zero knowledge proof generator is created using o1js's `ZkProgram`.
This package also provides a function to create a state utility for tests.

### üîê Zero Knowledge Proof

-   #### [`ZkProof`](https://github.com/berzanorg/nacho/blob/main/proof-generator/src/zk-proof.ts)

    The provable type for zk proofs generated by Nacho's proof generator.

### üèóÔ∏è Zero Knowledge Proof Generator

-   #### [`proofGenerator`](https://github.com/berzanorg/nacho/blob/main/proof-generator/src/proof-generator.ts)

    -   [`createGenesis(stateRoots)`](https://github.com/berzanorg/nacho/blob/main/proof-generator/src/methods/create-genesis.ts):

        Generates the initial proof.

    -   [`mergeProofs(stateRoots, currentProof, laterProof)`](https://github.com/berzanorg/nacho/blob/main/proof-generator/src/methods/merge-proofs.ts):

        Generates a proof by merging given proofs.

    -   [`depositTokens(stateRoots, earlierProof, singleBalanceWitness,currentDepositsMerkleListHash, expectedDepositsMerkleListHash,userAddress, tokenId, userDepositTokenAmount, userBalanceTokenAmount`](https://github.com/berzanorg/nacho/blob/main/proof-generator/src/methods/deposit-tokens.ts):

        Generates a proof by depositing a specific token for a user.

    -   [`makeBurnTokens(stateRoots,earlierProof, singleBalanceWitness,singleBurnWitness, userAddress, tokenId, userBurnTokenAmount,userBalanceTokenAmount, amountToBurn, userSignature)`](https://github.com/berzanorg/nacho/blob/main/proof-generator/src/methods/make-burn-tokens.ts):

        Generates a proof by burning token on a user's behalf.

    -   [`makeCreatePool(stateRoots, earlierProof, singlePoolWitness, singleLiquidityWitness, doubleBalanceWitness, baseTokenId, quoteTokenId, userAddress, userLiquidityBaseTokenAmount, userLiquidityQuoteTokenAmount, userBalanceBaseTokenAmount, userBalanceQuoteTokenAmount, userSignature)`](https://github.com/berzanorg/nacho/blob/main/proof-generator/src/methods/make-create-pool.ts):

        Generates a proof by creating an AMM pool on a user's behalf.

    -   [`makeProvideLiquidity(stateRoots, earlierProof, singlePoolWitness, singleLiquidityWitness, doubleBalanceWitness, baseTokenId, quoteTokenId, userAddress, userLiquidityPoints, userBalanceBaseTokenAmount, userBalanceQuoteTokenAmount, poolBaseTokenAmount, poolQuoteTokenAmount, poolTotalLiquidityPoints, userBaseTokenAmountToProvide, userQuoteTokenAmountLimitToProvide, userSignature)`](https://github.com/berzanorg/nacho/blob/main/proof-generator/src/methods/make-provide-liquidity.ts):

        Generates a proof by providing liquidity to an AMM pool on a user's behalf.

    -   [`makeRemoveLiquidity(stateRoots, earlierProof, singlePoolWitness, singleLiquidityWitness, doubleBalanceWitness, baseTokenId, quoteTokenId, userAddress, userLiquidityPoints, userBalanceBaseTokenAmount, userBalanceQuoteTokenAmount, poolBaseTokenAmount, poolQuoteTokenAmount, poolTotalLiquidityPoints, userLiquidityPointsToRemove, userBaseTokenAmountLimitToRemove, userQuoteTokenAmountLimitToRemove, userSignature)`](https://github.com/berzanorg/nacho/blob/main/proof-generator/src/methods/make-remove-liquidity.ts):

        Generates a proof by removing liquidity from an AMM pool on a user's behalf.

    -   [`makeBuyTokens(stateRoots, earlierProof, singlePoolWitness, doubleBalanceWitness, userAddress, baseTokenId, quoteTokenId, userBalanceBaseTokenAmount, userBalanceQuoteTokenAmount, poolBaseTokenAmount, poolQuoteTokenAmount, poolTotalLiquidityPoints, userBaseTokenAmountToSwap, userQuoteTokenAmountLimitToSwap, userSignature)`](https://github.com/berzanorg/nacho/blob/main/proof-generator/src/methods/make-buy-tokens.ts):

        Generates a proof by buying a token on a user's behalf.

    -   [`makeSellTokens(stateRoots, earlierProof, singlePoolWitness, doubleBalanceWitness, userAddress, baseTokenId, quoteTokenId, userBalanceBaseTokenAmount, userBalanceQuoteTokenAmount, poolBaseTokenAmount, poolQuoteTokenAmount, poolTotalLiquidityPoints, userBaseTokenAmountLimitToSwap, userQuoteTokenAmountToSwap, userSignature)`](https://github.com/berzanorg/nacho/blob/main/proof-generator/src/methods/make-sell-tokens.ts):

        Generates a proof by selling a token on a user's behalf.

### üõ†Ô∏è State Utility

-   #### [`createStateUtil`](https://github.com/berzanorg/nacho/blob/main/proof-generator/tests/create-state-util.ts)

    Returns a state utility object for tests.

## üìù License

This project is licensed under the MIT License.

You may use the source code of this project accordingly.

## üë§ About Me

I am [**Berzan**](https://berzan.org/) and I am developing [**Nacho**](https://nacho.finance/) to express my skills in the real world.

I built this library to use inside [**Nacho**](https://nacho.finance/).
